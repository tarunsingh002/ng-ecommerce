"use strict";(self.webpackChunkfirst_app=self.webpackChunkfirst_app||[]).push([[329],{5329:(K,g,u)=>{u.r(g),u.d(g,{ProductsModule:()=>E});var m=u(6895),t=u(6738),d=u(2517),p=u(6082),h=u(914),b=u(6406),n=u(4719);let T=(()=>{class i{constructor(r,o,e,c,a){this.aroute=r,this.pservice=o,this.authS=e,this.cservice=c,this.router=a,this.webmaster=!1,this.auth=!1,this.q=1}ngOnInit(){this.aroute.params.subscribe(r=>{this.product=this.pservice.getProducts()[+r.id]}),this.userSub=this.authS.User.subscribe(r=>{r?(this.webmaster=r.webmaster,this.auth=!0):(this.webmaster=!1,this.auth=!1)})}onSubmit(r){if(!this.auth||this.webmaster)return this.authS.logout(),void this.router.navigate(["/auth"]);this.cservice.addToCart(this.product.id,r.value.quantity),this.router.navigate(["/buying/cart"])}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(d.gz),t.Y36(p.M),t.Y36(h.e),t.Y36(b.m),t.Y36(d.F0))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-product-detail"]],decls:38,vars:7,consts:[[1,"container"],[1,"border","my-5"],[1,"row","no-gutters"],[1,"col-lg-6"],[1,"w-100",3,"src"],[1,"col-lg-6","d-flex","flex-column","justify-content-between"],[1,"card-header"],[1,"card-title","text-center"],[1,"d-flex","flex-column","justify-content-end"],[1,"card-body"],[1,"card-subtitle","text-center","mb-4"],[1,"card-subtitle","text-center","mb-1","mb-xl-4"],[1,"card-text"],[1,"card-footer"],[3,"ngSubmit"],["f","ngForm"],[1,"form-group"],["for","quantity",1,"mb-2"],["name","quantity","id","quantity",1,"form-control",3,"ngModel","ngModelChange"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["type","submit",1,"btn","btn-block","btn-primary","mt-2",3,"disabled"]],template:function(o,e){if(1&o){const c=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._UZ(4,"img",4),t.qZA(),t.TgZ(5,"div",5)(6,"div",6)(7,"h5",7),t._uU(8),t.qZA()(),t.TgZ(9,"div",8)(10,"div",9)(11,"h6",10),t._uU(12),t.qZA(),t.TgZ(13,"h6",11),t._uU(14),t.qZA(),t.TgZ(15,"p",12),t._uU(16),t.qZA()(),t.TgZ(17,"div",13)(18,"form",14,15),t.NdJ("ngSubmit",function(){t.CHM(c);const l=t.MAs(19);return t.KtG(e.onSubmit(l))}),t.TgZ(20,"div",16)(21,"label",17),t._uU(22,"Quantity"),t.qZA(),t.TgZ(23,"select",18),t.NdJ("ngModelChange",function(l){return e.q=l}),t.TgZ(24,"option",19),t._uU(25,"1"),t.qZA(),t.TgZ(26,"option",20),t._uU(27,"2"),t.qZA(),t.TgZ(28,"option",21),t._uU(29,"3"),t.qZA(),t.TgZ(30,"option",22),t._uU(31,"4"),t.qZA(),t.TgZ(32,"option",23),t._uU(33,"5"),t.qZA(),t.TgZ(34,"option",24),t._uU(35,"6"),t.qZA()()(),t.TgZ(36,"button",25),t._uU(37,"Add to Cart"),t.qZA()()()()()()()()}2&o&&(t.xp6(4),t.Q6J("src",e.product.url,t.LSH),t.xp6(4),t.hij(" ",e.product.name," "),t.xp6(4),t.hij("","Specification: "+e.product.specification," "),t.xp6(2),t.Oqu("Price: $"+e.product.price),t.xp6(2),t.hij(" ",e.product.description," "),t.xp6(7),t.Q6J("ngModel",e.q),t.xp6(13),t.Q6J("disabled",!e.auth||e.webmaster))},dependencies:[n._Y,n.YN,n.Kr,n.EJ,n.JJ,n.JL,n.On,n.F],styles:["img[_ngcontent-%COMP%]{height:510px;object-fit:cover}@media (max-width: 1200px){img[_ngcontent-%COMP%]{height:400px}}@media (max-width: 992px){img[_ngcontent-%COMP%]{height:600px}}@media (max-width: 768px){img[_ngcontent-%COMP%]{height:400px}}@media (max-width: 576px){img[_ngcontent-%COMP%]{height:80vw}}"]})}return i})();class x{constructor(s,r,o,e,c,a,l,H){this.name=s,this.brand=r,this.category=o,this.description=e,this.url=c,this.specification=a,this.price=l,this.id=H}}var v=u(3754),C=u(4471);function q(i,s){1&i&&(t.TgZ(0,"small"),t._uU(1,"The name field is required."),t.qZA())}function P(i,s){1&i&&(t.TgZ(0,"small"),t._uU(1,"The brand field is required."),t.qZA())}function w(i,s){1&i&&(t.TgZ(0,"small"),t._uU(1,"The category field is required."),t.qZA())}function A(i,s){1&i&&(t.TgZ(0,"small"),t._uU(1,"The description field is required."),t.qZA())}function F(i,s){1&i&&(t.TgZ(0,"small"),t._uU(1,"The url field is required."),t.qZA())}function U(i,s){1&i&&(t.TgZ(0,"small"),t._uU(1,"The specification field is required."),t.qZA())}function I(i,s){1&i&&(t.TgZ(0,"small"),t._uU(1,"The Price field is required."),t.qZA())}function J(i,s){if(1&i&&(t.TgZ(0,"button",23),t._uU(1,"Add Product"),t.qZA()),2&i){const r=t.oxw();t.Q6J("disabled",r.reactiveForm.invalid)}}function N(i,s){1&i&&(t.TgZ(0,"button",24),t._uU(1,"Update Product"),t.qZA())}let _=(()=>{class i{constructor(r,o,e,c,a){this.pservice=r,this.dservice=o,this.aroute=e,this.route=c,this.l=a,this.editMode=!1}ngOnInit(){this.reactiveForm=new n.cw({name:new n.NI(null,n.kI.required),brand:new n.NI(null,n.kI.required),category:new n.NI(null,n.kI.required),description:new n.NI(null,n.kI.required),url:new n.NI(null,n.kI.required),specification:new n.NI(null,n.kI.required),price:new n.NI(null,n.kI.required)}),this.aroute.params.subscribe(r=>{null!=r.id&&(this.editMode=!0,this.dservice.getProducts().subscribe(()=>{let o=this.pservice.getProducts()[+r.id];this.reactiveForm.setValue({name:o.name,brand:o.brand?o.brand:"",category:o.category?o.category:"",description:o.description,url:o.url,specification:o.specification,price:o.price}),this.id=o.id}))})}onSubmit(r){let o=r.value,e=new x(o.name,o.brand,o.category,o.description,o.url,o.specification,o.price);r.reset(),this.l.isLoading.next(!0),this.editMode?this.dservice.updateProduct(this.id,e).subscribe(()=>{this.l.isLoading.next(!1),this.route.navigate(["products"])}):this.dservice.addProduct(e).subscribe(c=>{e.id=c.name,this.pservice.addProduct(e),this.l.isLoading.next(!1),this.route.navigate(["products"])})}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(p.M),t.Y36(v.f),t.Y36(d.gz),t.Y36(d.F0),t.Y36(C.b))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-product-form"]],decls:43,vars:11,consts:[[1,"container"],[1,"display-4","text-center"],[1,"row","d-flex","justify-content-center","my-4"],[1,"col-lg-6","col-md-8"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control"],[4,"ngIf"],["for","brand"],["type","text","id","brand","formControlName","brand",1,"form-control"],["for","category"],["type","text","id","category","formControlName","category",1,"form-control"],["for","description"],["type","text","id","description","formControlName","description",1,"form-control"],["for","url"],["type","text","id","url","formControlName","url",1,"form-control"],["for","specification"],["type","text","id","specification","formControlName","specification",1,"form-control"],["for","price"],["type","number","id","price","formControlName","price",1,"form-control"],["class","btn btn-primary","type","submit",3,"disabled",4,"ngIf"],["class","btn btn-primary","type","submit",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","submit",1,"btn","btn-primary"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"form",4),t.NdJ("ngSubmit",function(){return e.onSubmit(e.reactiveForm)}),t.TgZ(6,"div",5)(7,"label",6),t._uU(8,"Name"),t.qZA(),t._UZ(9,"input",7),t.YNc(10,q,2,0,"small",8),t.qZA(),t.TgZ(11,"div",5)(12,"label",9),t._uU(13,"Brand"),t.qZA(),t._UZ(14,"input",10),t.YNc(15,P,2,0,"small",8),t.qZA(),t.TgZ(16,"div",5)(17,"label",11),t._uU(18,"Category"),t.qZA(),t._UZ(19,"input",12),t.YNc(20,w,2,0,"small",8),t.qZA(),t.TgZ(21,"div",5)(22,"label",13),t._uU(23,"Description"),t.qZA(),t._UZ(24,"input",14),t.YNc(25,A,2,0,"small",8),t.qZA(),t.TgZ(26,"div",5)(27,"label",15),t._uU(28,"Image URL"),t.qZA(),t._UZ(29,"input",16),t.YNc(30,F,2,0,"small",8),t.qZA(),t.TgZ(31,"div",5)(32,"label",17),t._uU(33,"Specifications"),t.qZA(),t._UZ(34,"input",18),t.YNc(35,U,2,0,"small",8),t.qZA(),t.TgZ(36,"div",5)(37,"label",19),t._uU(38,"Price"),t.qZA(),t._UZ(39,"input",20),t.YNc(40,I,2,0,"small",8),t.qZA(),t.YNc(41,J,2,1,"button",21),t.YNc(42,N,2,0,"button",22),t.qZA()()()()),2&o&&(t.xp6(2),t.Oqu(e.editMode?"Edit Product Form":"Add Product Form"),t.xp6(3),t.Q6J("formGroup",e.reactiveForm),t.xp6(5),t.Q6J("ngIf",e.reactiveForm.controls.name.invalid&&e.reactiveForm.controls.name.touched),t.xp6(5),t.Q6J("ngIf",e.reactiveForm.controls.brand.invalid&&e.reactiveForm.controls.brand.touched),t.xp6(5),t.Q6J("ngIf",e.reactiveForm.controls.category.invalid&&e.reactiveForm.controls.category.touched),t.xp6(5),t.Q6J("ngIf",e.reactiveForm.controls.description.invalid&&e.reactiveForm.controls.description.touched),t.xp6(5),t.Q6J("ngIf",e.reactiveForm.controls.url.invalid&&e.reactiveForm.controls.url.touched),t.xp6(5),t.Q6J("ngIf",e.reactiveForm.controls.specification.invalid&&e.reactiveForm.controls.specification.touched),t.xp6(5),t.Q6J("ngIf",e.reactiveForm.controls.price.invalid&&e.reactiveForm.controls.price.touched),t.xp6(1),t.Q6J("ngIf",!e.editMode),t.xp6(1),t.Q6J("ngIf",e.editMode))},dependencies:[m.O5,n._Y,n.Fj,n.wV,n.JJ,n.JL,n.sg,n.u],styles:["small[_ngcontent-%COMP%]{color:red}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:solid 1px red}"]})}return i})(),M=(()=>{class i{constructor(r){this.pservice=r,this.placeholder=""}ngOnInit(){this.reactiveForm=new n.cw({searchBy:new n.NI(null),searchTerm:new n.NI(null)}),this.products=this.pservice.getProducts(),this.pservice.searchedProductsChanged.next(this.products),this.reactiveForm.get("searchTerm").valueChanges.subscribe(r=>{if(""===r.trim())this.searchedProducts=this.products;else{let o=this.products.filter(a=>a.name.toLowerCase().includes(r.trim().toLowerCase())),e=this.products.filter(a=>a.brand.toLowerCase().includes(r.trim().toLowerCase())),c=this.products.filter(a=>a.category.toLowerCase().includes(r.trim().toLowerCase()));this.searchedProducts=o.concat(e).concat(c),this.searchedProducts=this.unique(this.searchedProducts)}this.pservice.searchedProductsChanged.next(this.searchedProducts)})}unique(r){const o=r.map(({id:c})=>c);return r.filter(({id:c},a)=>!o.includes(c,a+1))}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(p.M))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-search"]],decls:9,vars:1,consts:[[1,"row","d-flex","justify-content-center","mb-5"],[1,"col-sm-8","col-lg-6","col-xl-4"],[3,"formGroup"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["xmlns","http://www.w3.org/2000/svg ","viewBox","0 0 512 512",1,"icon"],["d","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"],["type","text","placeholder","Enter a name, brand or a category","formControlName","searchTerm",1,"form-control"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"div",3)(4,"div",4)(5,"span",5),t.O4$(),t.TgZ(6,"svg",6),t._UZ(7,"path",7),t.qZA()()(),t.kcU(),t._UZ(8,"input",8),t.qZA()()()()),2&o&&(t.xp6(2),t.Q6J("formGroup",e.reactiveForm))},dependencies:[n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u],styles:[".icon[_ngcontent-%COMP%]{width:1em;height:1em;vertical-align:-.125em}"]})}return i})();function Y(i,s){1&i&&(t.TgZ(0,"div",4)(1,"h3",5),t._uU(2,"There are currently no products for your search query"),t.qZA()())}function L(i,s){if(1&i){const r=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(r);const e=t.oxw().$implicit,c=t.oxw();return t.KtG(c.addToCart(e))}),t._uU(1,"Add to Cart"),t.qZA()}}function S(i,s){if(1&i){const r=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(r);const e=t.oxw().index,c=t.oxw();return t.KtG(c.onDelete(e))}),t._uU(1,"Delete"),t.qZA()}}const O=function(i){return["/products",i,"edit"]};function Q(i,s){if(1&i&&(t.TgZ(0,"button",18),t._uU(1,"Edit"),t.qZA()),2&i){const r=t.oxw().index;t.Q6J("routerLink",t.VKq(1,O,r))}}const k=function(i){return["/products",i]};function j(i,s){if(1&i&&(t.TgZ(0,"div",6)(1,"div",7),t._UZ(2,"img",8),t.TgZ(3,"div",9)(4,"h5",10),t._uU(5),t.qZA(),t.TgZ(6,"h6",11),t._uU(7),t.qZA()(),t.TgZ(8,"div",9)(9,"button",12),t._uU(10,"Details"),t.qZA(),t.YNc(11,L,2,0,"button",13),t.YNc(12,S,2,0,"button",14),t.YNc(13,Q,2,3,"button",15),t.qZA()()()),2&i){const r=s.$implicit,o=s.index,e=t.oxw();t.xp6(2),t.Q6J("src",r.url,t.LSH),t.xp6(3),t.Oqu(r.name),t.xp6(2),t.Oqu("Price: $"+r.price),t.xp6(2),t.Q6J("routerLink",t.VKq(7,k,o)),t.xp6(2),t.Q6J("ngIf",!e.webmaster&&e.auth),t.xp6(1),t.Q6J("ngIf",e.webmaster),t.xp6(1),t.Q6J("ngIf",e.webmaster)}}let D=(()=>{class i{constructor(r,o,e,c,a){this.pservice=r,this.dservice=o,this.authS=e,this.cservice=c,this.router=a,this.products=[],this.auth=!1,this.webmaster=!1}ngOnInit(){this.pservice.searchedProductsChanged.subscribe(r=>{this.products=r}),this.authSub=this.authS.User.subscribe(r=>{this.auth=!!r,r&&(this.webmaster=r.webmaster)})}onDelete(r){confirm("Are you sure you want to delete this product ?")&&this.dservice.deleteProduct(this.products[r].id).subscribe(()=>{this.pservice.deleteProduct(r)})}addToCart(r){this.cservice.addToCart(r.id,1),this.router.navigate(["/buying/cart"])}ngOnDestroy(){this.authSub.unsubscribe()}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(p.M),t.Y36(v.f),t.Y36(h.e),t.Y36(b.m),t.Y36(d.F0))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-product-list"]],decls:5,vars:2,consts:[[1,"container","mt-5"],["class","w-100 no-products d-flex align-items-center justify-content-center",4,"ngIf"],[1,"row"],["class","col-sm-6 col-xl-4 mb-4",4,"ngFor","ngForOf"],[1,"w-100","no-products","d-flex","align-items-center","justify-content-center"],[1,"display-3","text-center"],[1,"col-sm-6","col-xl-4","mb-4"],[1,"card"],[3,"src"],[1,"card-body"],[1,"card-title","text-center"],[1,"card-subtitle","text-center"],[1,"btn","btn-block","btn-info","mx-2","my-2",3,"routerLink"],["class","btn btn-block btn-primary mx-2 my-2",3,"click",4,"ngIf"],["class","btn btn-block btn-danger mx-2 my-2",3,"click",4,"ngIf"],["class","btn btn-block btn-warning mx-2 my-2",3,"routerLink",4,"ngIf"],[1,"btn","btn-block","btn-primary","mx-2","my-2",3,"click"],[1,"btn","btn-block","btn-danger","mx-2","my-2",3,"click"],[1,"btn","btn-block","btn-warning","mx-2","my-2",3,"routerLink"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0),t._UZ(1,"app-search"),t.YNc(2,Y,3,0,"div",1),t.TgZ(3,"div",2),t.YNc(4,j,14,9,"div",3),t.qZA()()),2&o&&(t.xp6(2),t.Q6J("ngIf",!e.products.length),t.xp6(2),t.Q6J("ngForOf",e.products))},dependencies:[m.sg,m.O5,d.rH,M],styles:["img[_ngcontent-%COMP%]{height:300px;object-fit:cover}.no-products[_ngcontent-%COMP%]{height:65vh}@media (max-width: 768px){img[_ngcontent-%COMP%]{height:200px}}@media (max-width: 576px){img[_ngcontent-%COMP%]{height:80vw}}"]})}return i})();var f=u(2361),G=u(2986),$=u(4850);let Z=(()=>{class i{constructor(r,o){this.authS=r,this.router=o}canActivate(r,o){return this.authS.User.pipe((0,G.q)(1),(0,$.U)(e=>!(!e||!e.webmaster)||(e&&!e.webmaster?(this.authS.logout(),this.router.createUrlTree(["/auth"])):void(e||this.router.createUrlTree(["/auth"])))))}static#t=this.\u0275fac=function(o){return new(o||i)(t.LFG(h.e),t.LFG(d.F0))};static#e=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var y=u(6631);const z=[{path:"",component:D,resolve:[f.$]},{path:"create",component:_,canActivate:[y.a,Z]},{path:":id",component:T,resolve:[f.$]},{path:":id/edit",component:_,resolve:[f.$],canActivate:[y.a,Z]}];let E=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[m.ez,n.UX,n.u5,d.Bz.forChild(z)]})}return i})()}}]);